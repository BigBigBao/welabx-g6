(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/qA8":function(e,t,n){var a=n("LboF"),o=n("7Oky");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};a(o,i);e.exports=o.locals||{}},"7Oky":function(e,t,n){(t=n("JPst")(!1)).push([e.i,".g6-tooltip{position:fixed;top:0;left:0;font-size:12px;color:#545454;-webkit-border-radius:4px;border-radius:4px;border:1px solid #e2e2e2;background-color:rgba(255,255,255,0.9);-webkit-box-shadow:#aeaeae 0 0 10px;box-shadow:#aeaeae 0 0 10px;padding:10px 8px}.g6-minimap{position:absolute;right:0;bottom:0}\n",""]),e.exports=t},CncF:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("div",{class:{hidden:e.headVisible},attrs:{id:"headPanel"}},[n("span",{staticClass:"logo"},[e._v("Vue 生命周期图示")]),e._v(" "),n("i",{staticClass:"gb-toggle-btn",on:{click:function(t){e.headVisible=!e.headVisible}}})]),e._v(" "),n("item-panel",{attrs:{graph:e.graph},on:{"canvas-add-node":e.addNode}}),e._v(" "),n("div",{attrs:{id:"toolbar"}},[n("i",{staticClass:"iconfont icon-undo",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"iconfont icon-redo",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"split"}),e._v(" "),n("i",{staticClass:"iconfont icon-copy",on:{click:e.copyNode}}),e._v(" "),n("i",{staticClass:"iconfont icon-paste",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"split"}),e._v(" "),n("i",{staticClass:"iconfont icon-line-style",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"iconfont icon-line-strong",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"split"}),e._v(" "),n("i",{staticClass:"iconfont icon-toup",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"iconfont icon-todown",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"split"}),e._v(" "),n("i",{staticClass:"iconfont icon-font-size",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"iconfont icon-actual-size",on:{click:e.addNode}}),e._v(" "),n("i",{staticClass:"iconfont icon-full-screen",on:{click:e.addNode}})]),e._v(" "),n("div",{attrs:{id:"canvasPanel"},on:{dragover:function(e){e.preventDefault()}}}),e._v(" "),n("div",{class:{hidden:!e.configVisible},attrs:{id:"configPanel"}},[n("h2",{staticClass:"panel-title"},[e._v("数据配置")]),e._v(" "),n("i",{staticClass:"gb-toggle-btn",on:{click:function(t){e.configVisible=!e.configVisible}}}),e._v(" "),n("div",{staticClass:"config-data"},[e._v("\n      "+e._s(e.config)+"\n    ")])]),e._v(" "),e.tooltip?n("div",{staticClass:"g6-tooltip",style:"top: "+e.top+"px; left: "+e.left+"px;"},[e._v("\n    label: "+e._s(e.tooltip)+"\n  ")]):e._e()],1)};a._withStripped=!0;var o=n("0iUn"),i=n("sLSF"),r=n("fD4D"),s=(n("HAE/"),n("WLL4"),n("jm62"),n("8+KV"),n("0l/t"),n("rGqo"),n("RW0V"),n("vYYK"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var d=function(e){e.registerBehavior("canvas-event",{getDefaultCfg:function(){return{originOffset:[],offset:[]}},getEvents:function(){return{"canvas:mousemove":"onCanvasMouseMove","canvas:mousedown":"onCanvasMouseDown","canvas:mouseup":"onCanvasMouseUp","canvas:dragstart":"onCanvasDragStart","canvas:dragend":"onCanvasDragEnd"}},onCanvasMouseMove:function(e){e.target.get("el").style.cursor="grab"},onCanvasMouseDown:function(e){e.target.get("el").style.cursor="grabbing"},onCanvasMouseUp:function(e){e.target.get("el").style.cursor="grab"},onCanvasDragStart:function(e){var t=e.target.cfg.el,n=+t.getAttribute("dx"),a=+t.getAttribute("dy");this.originOffset=[n,a],this.offset=[e.clientX,e.clientY]},onCanvasDragEnd:function(e){e.target.get("el").style.cursor="grab";var t=e.target.cfg.el,n=this.originOffset[0]+e.clientX-this.offset[0],a=this.originOffset[1]+e.clientY-this.offset[1];t.setAttribute("dx",n),t.setAttribute("dy",a),this.graph.emit("on-canvas-dragend",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{dx:n,dy:a}))}})};function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){d(e),function(e){e.registerBehavior("select-node",{getDefaultCfg:function(){return{multiple:!1}},getEvents:function(){return{"node:click":"onNodeClick","node:dblclick":"ondblClick","canvas:click":"onCanvasClick","node:mouseenter":"onNodeMouseEnter","node:mousemove":"onNodeMouseMove","node:mouseleave":"onNodeMouseLeave"}},onNodeClick:function(e){this._clearSelected(),e.item.toFront(),this.graph.setItemState(e.item,"nodeState","selected"),this.graph.emit("after-node-selected",e)},ondblClick:function(e){this._clearSelected(),e.item.toFront(),this.graph.setItemState(e.item,"nodeState","selected"),this.graph.emit("after-node-dblclick",e)},onCanvasClick:function(e){this._clearSelected(),this.graph.emit("on-canvas-click",e)},onNodeMouseEnter:function(e){e.item.hasState("nodeState:selected")||this.graph.setItemState(e.item,"nodeState","hover"),this.graph.emit("on-node-mouseenter",e)},onNodeMouseMove:function(e){this.graph.emit("on-node-mousemove",e)},onNodeMouseLeave:function(e){e.item.hasState("nodeState:selected")||this.graph.clearItemStates(e.item,"nodeState:hover"),this.graph.emit("on-node-mouseleave",e)},_clearSelected:function(){var e=this;this.graph.findAllByState("node","nodeState:selected").forEach((function(t){e.graph.clearItemStates(t,["nodeState:selected","nodeState:hover"])})),this.graph.findAllByState("edge","edgeState:selected").forEach((function(t){e.graph.clearItemStates(t,["edgeState:selected","edgeState:hover"])})),this.graph.emit("after-node-selected")}})}(e),function(e){e.registerBehavior("delete-item",{getEvents:function(){return{keydown:"onKeydown"}},onKeydown:function(e){var t=this.graph;if("true"===t.cfg.canvas.cfg.el.getAttribute("isFocused")&&8===e.keyCode){var n=t.findAllByState("node","nodeState:selected");if(n&&n.length){var a=n[0].getContainer().get("item");t.emit("before-node-removed",{target:a,callback:function(e){e&&(t.remove(a),t.set("after-node-selected",[]),t.emit("after-node-selected"),t.emit("after-node-removed",a))}})}var o=t.findAllByState("edge","edgeState:selected");if(o&&o.length){var i=o[0].getContainer().get("item");t.emit("before-node-removed",{target:i,callback:function(e){e&&(t.remove(i),t.set("after-edge-selected",[]),t.emit("after-edge-selected"),t.emit("after-edge-removed",i))}})}}}})}(e),function(e){e.registerBehavior("active-edge",{getDefaultCfg:function(){return{editMode:!1}},getEvents:function(){return{"canvas:click":"onCanvasClick","edge:click":"onEdgeClick","edge:dblclick":"ondblEdgeClick","edge:mouseenter":"onMouseEnter","edge:mousemove":"onMouseMove","edge:mouseleave":"onMouseLeave"}},onCanvasClick:function(e){this.editMode=!1,this._clearSelected()},onEdgeClick:function(e){this._clearSelected(),this.editMode=!0,this.graph.setItemState(e.item.get("id"),"edgeState","selected"),this.graph.emit("after-edge-selected",e)},ondblEdgeClick:function(e){this._clearSelected(),this.editMode=!0,this.graph.setItemState(e.item,"edgeState","selected"),this.graph.emit("after-edge-dblclick",e)},onMouseEnter:function(e){this.editMode||this.graph.setItemState(e.item,"edgeState","hover"),this.graph.emit("on-edge-mouseenter",e)},onMouseMove:function(e){this.editMode||this.graph.setItemState(e.item,"edgeState","hover"),this.graph.emit("on-edge-mousemove",e)},onMouseLeave:function(e){this.editMode||this.graph.setItemState(e.item,"edgeState","default"),this.graph.emit("on-edge-mouseleave",e)},_clearSelected:function(){var e=this;this.graph.findAllByState("node","nodeState:selected").forEach((function(t){e.graph.clearItemStates(t,["nodeState:selected"])})),this.graph.findAllByState("edge","edgeState:selected").forEach((function(t){e.graph.clearItemStates(t,["edgeState:selected"])})),this.graph.emit("after-edge-selected")}})}(e),function(e){e.registerBehavior("hover-node",{getEvents:function(){return{"node:mouseenter":"onNodeEnter","node:mouseleave":"onNodeLeave"}},onNodeEnter:function(e){this.graph.setItemState(e.item,"anchorShow",!0)},onNodeLeave:function(e){this.graph.setItemState(e.item,"anchorShow",!1)}})}(e),function(e){e.registerBehavior("drag-node",{getDefaultCfg:function(){return{dragTarget:"node",dragStartNode:{},distance:[]}},getEvents:function(){return{"node:mousedown":"onMousedown","node:mouseup":"onMouseup","node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","node:dragenter":"onDragEnter","node:drop":"onDrop"}},onMousedown:function(e){var t=this;(this._clearSelected(e),e.target.cfg.isAnchor)&&(this.dragTarget="anchor",this.dragStartNode=h({},e.item._cfg,{anchorIndex:e.target.cfg.index}),this.graph.findAll("node",(function(e){return e})).forEach((function(e){t.graph.setItemState(e,"anchorActived",!0)})));this.graph.emit("on-node-mousedown",e)},onMouseup:function(e){"anchor"===this.dragTarget&&this.graph.findAll("node",(function(e){return e})).forEach((function(e){e.clearStates("anchorActived")}));this.graph.emit("on-node-mouseup",e)},onDragStart:function(e){e.target.cfg.isAnchor||(e.item.toFront(),this.dragTarget="node",this._nodeOnDragStart(e,e.item.getContainer())),this.graph.emit("on-node-dragstart",e)},onDrag:function(e){"node"===this.dragTarget&&this._nodeOnDrag(e,e.item.getContainer()),this.graph.emit("on-node-drag",e)},onDragEnd:function(e){var t=e.item.getContainer();"anchor"===this.dragTarget?this.graph.findAll("node",(function(e){return e})).forEach((function(e){e.clearStates("anchorActived")})):"node"===this.dragTarget&&this._nodeOnDragEnd(e,t);this.graph.emit("on-node-dragend",e)},onDrop:function(e){this.dragStartNode.id&&e.target.cfg.isAnchor&&this.dragStartNode.id!==e.target.cfg.nodeId&&this.graph.emit("before-edge-add",{source:this.dragStartNode.group.get("item"),target:e.item.getContainer().get("item"),sourceAnchor:this.dragStartNode.anchorIndex,targetAnchor:e.target.cfg.index}),this.graph.emit("on-node-drop",e)},_nodeOnDragStart:function(e,t){var n=t.get("item"),a=n.get("originStyle").radius,o=n.get("currentShape"),i=n.getBBox(),r=i.width,s=i.height,c=i.centerX,d=i.centerY,l=n.get("shapeFactory")[o].shapeType,g={fillOpacity:.1,fill:"rgb(24, 144, 255, 1)",stroke:"#1890FF",cursor:"move",lineDash:[4,4],width:r,height:s};switch(l){case"circle":this.distance=[e.x-c,e.y-d],g=h({},g,{x:0,y:0,r:r/2});break;case"rect":this.distance=[e.x-c+r/2,e.y-d+s/2],g=h({},g,{x:-r/2,y:-s/2,r:r/2}),a&&(g.radius=a);break;case"ellipse":this.distance=[e.x-c,e.y-d],g=h({},g,{x:0,y:0,rx:r/2,ry:s/2});break;case"path":this.distance=[e.x-c,e.y-d],g.path=n.get("keyShape").attrs.path,g.size=[r,s],g.x=0,g.y=0}t.addShape(l,{attrs:g,className:"shadow-node"}).toFront()},_nodeOnDrag:function(e,t){var n=t.get("item"),a=n.getBBox(),o=a.width,i=a.height,r=a.centerX,s=a.centerY,c=n.get("currentShape"),d=n.get("shapeFactory")[c].shapeType,l=t.getItem("shadow-node");if("path"===d){var h=e.x-r-this.distance[0],g=e.y-s-this.distance[1];l.attr({path:[["M",h,g-i/2],["L",h+o/2,g],["L",h,g+i/2],["L",h-o/2,g],["Z"]]})}else l.attr({x:e.x-r-this.distance[0],y:e.y-s-this.distance[1]});l.toFront()},_nodeOnDragEnd:function(e,t){var n=t.get("item"),a=n.getBBox(),o=a.width,i=a.height,r=t.getItem("shadow-node"),s=n.get("currentShape"),c={x:0,y:0};switch(n.get("shapeFactory")[s].shapeType){case"ellipse":case"circle":c.x=e.x-this.distance[0],c.y=e.y-this.distance[1];break;case"rect":c.x=e.x-this.distance[0]+o/2,c.y=e.y-this.distance[1]+i/2;break;case"path":c.x=e.x-this.distance[0],c.y=e.y-this.distance[1]}r.remove(),n.updatePosition(c),this.graph.refreshPositions()},_clearSelected:function(e){var t=this;this.graph.findAllByState("edge","edgeState:selected").forEach((function(e){t.graph.clearItemStates(e,["edgeState:selected","edgeState:hover"])}))}})}(e)},f=(n("f3/d"),n("Z2Ku"),n("dRSK"),n("Vd3H"),{fill:"#E7F7FE",stroke:"#1890FF",lineWidth:1}),u={cursor:"default",fill:"#666",textAlign:"center",textBaseline:"middle",fontSize:12},p={width:20,height:20,left:0,top:0},v={radius:11,fill:"#1890FF",fillOpacity:.25},y={r:4,fill:"#fff",stroke:"#1890FF",lineWidth:1},m=v;function b(e,t,n,a){e.attr(t),n&&n.attr(a)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hover",a=t.get("item"),o=a.getModel(),i=a.get("originStyle"),r=Object.assign(i,o.edgeStateStyles),s=r["".concat(e,"State:").concat(n)],c=r["".concat(e,"State:default")];return{activeStyle:s,defaultStyle:c,originStyle:i}}var w={anchorShow:function(e,t){e?t.showAnchor(t):t.clearAnchor(t)},anchorActived:function(e,t){if(e){var n=t.get("item").getModel().anchorPoints;t.showAnchor(t),this.getAnchorPoints({anchorPoints:n}).forEach((function(e,n){var a=t.get("children")[0].getBBox(),o=t.addShape("circle",{zIndex:0,attrs:{x:a.minX+a.width*e[0],y:a.minY+a.height*e[1],r:0,fill:"#1890ff",opacity:.5},nodeId:t.get("item").get("id"),className:"node-anchor-bg",draggable:!0,isAnchor:!0,index:n});o.animate({r:11},{duration:100,easing:"easeCubic",delay:0}),t.sort(),t.anchorShapes.push(o)})),t.anchorShapes.filter((function(e){"node-anchor"===e.get("className")&&e.toFront(),"node-anchor-group"===e.get("className")&&(e.attr({r:m.radius+2}),e.toFront())}))}else t.clearAnchor(t)},nodeState:function(e,t){w["nodeState:".concat(e)].call(this,e,t)},"nodeState:default":function(e,t){e&&b(t.getChildByIndex(0),S("node",t).defaultStyle)},"nodeState:selected":function(e,t){var n=t.getChildByIndex(0),a=S("node",t,"selected"),o=a.activeStyle,i=a.defaultStyle;o&&b(n,e?o:i)},"nodeState:hover":function(e,t){var n=t.getChildByIndex(0),a=S("node",t,"hover"),o=a.activeStyle,i=a.defaultStyle;o&&b(n,e?o:i)},edgeState:function(e,t){w["edgeState:".concat(e)].call(this,e,t)},"edgeState:default":function(e,t){if(e){var n=S("edge",t).defaultStyle;b(t.getChildByIndex(0),n)}},"edgeState:hover":function(e,t){var n=t.getChildByIndex(0),a=n.get("attrs").endArrow,o=S("edge",t,"hover"),i=o.activeStyle,r=o.defaultStyle,s=o.originStyle;i&&(e?(b(n,i),a&&n.attr("endArrow",{path:a.path,fill:i.stroke||s.stroke})):(b(n,r),a&&n.attr("endArrow",{path:a.path,fill:r.stroke||i.stroke||s.stroke})))},"edgeState:selected":function(e,t){var n=t.getChildByIndex(0),a=n.get("attrs").endArrow,o=S("edge",t,"selected"),i=o.activeStyle,r=o.defaultStyle,s=o.originStyle;i&&(e?(b(n,i),a&&n.attr("endArrow",{path:a.path,fill:i.stroke||s.stroke})):(b(n,r),a&&n.attr("endArrow",{path:a.path,fill:r.stroke||i.stroke||s.stroke})))}},O=w,C=n("dfwq"),k=[],x=null;function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=v,j=function(e){e.registerNode("base-node",{drawIcon:function(e){if(this.attrs.icon){var t=_({},this.attrs.iconStyles);e.icon=e.addShape("image",{attrs:{img:this.attrs.icon,x:t.left,y:t.top,width:t.width,height:t.height},className:"".concat(this.attrs.type,"-icon")}),this.attrs.hideIcon&&e.icon.hide()}},initAnchor:function(e){var t=this;e.anchorShapes=[],e.showAnchor=function(e){t.drawAnchor(e)},e.clearAnchor=function(e){e.anchorShapes&&e.anchorShapes.forEach((function(e){return e.remove()})),e.anchorShapes=[]}},drawAnchor:function(e){var t=this.attrs.anchorPointStyles,n=e.get("children")[0].getBBox();this.getAnchorPoints(this.attrs).forEach((function(a,o){var i=e.addShape("circle",{attrs:_({x:n.minX+n.width*a[0],y:n.minY+n.height*a[1]},t),zIndex:1,nodeId:e.get("id"),className:"node-anchor",draggable:!0,isAnchor:!0,index:o}),r=e.addShape("circle",{attrs:{x:n.minX+n.width*a[0],y:n.minY+n.height*a[1],r:E.radius,fill:"#000",opacity:0},zIndex:2,nodeId:e.get("id"),className:"node-anchor-group",draggable:!0,isAnchor:!0,index:o});!function(e,t,n){e.on("mouseenter",(function(){e.attr({cursor:"crosshair"})})),e.on("dragstart",(function(a){if(null==x){var o=e.get("attrs").r,i=t.get("cacheCanvasBBox"),r=t.get("item")._cfg,s=r.id,c=(r.model.style.lineWidth||0)/2,d=[(i.width-2*o-4)*(n[0]-.5)-c,(i.height-2*o-4)*(n[1]-.5)-c];k=[a.x,a.y];var l=t.addShape("path",{attrs:{stroke:"#1890FF",lineDash:[5,5],path:[["M"].concat(d),["L"].concat(d)]},className:"dashed-line",pointStart:d});t.toFront(),l.toFront(),x=s}})),e.on("drag",(function(e){var n=t.get("children")[0].get("canvasBox"),a=t.getItem("dashed-line"),o=a.get("pointStart"),i=[e.x-n.x-n.width/2,e.y-n.y-n.height/2];a.toFront(),Math.sqrt(Math.pow(Math.abs(k[0])-Math.abs(e.x),2)+Math.pow(Math.abs(k[1])-Math.abs(e.y),2))>=16&&(e.x>=k[0]?(e.y,k[1],i[0]-=1,i[1]-=1):(e.y,k[1],i[0]+=1,i[1]+=1)),a.attr({path:[["M"].concat(Object(C.a)(o)),["L",i[0],i[1]]]})})),e.on("dragend",(function(e){t.getItem("dashed-line").remove(),x=null})),e.on("dragenter",(function(e){if(e.target.cfg.nodeId!==x){var n=e.target.cfg.index;t.getAllAnchorBg()[n]&&t.getAllAnchorBg()[n].attr("fillOpacity",.7)}})),e.on("dragleave",(function(e){if(e.target.cfg.nodeId!==x){var n=e.target.cfg.index;t.getAllAnchorBg()[n]&&t.getAllAnchorBg()[n].attr("fillOpacity",.5)}}))}(r,e,a),e.anchorShapes.push(i),e.anchorShapes.push(r)})),e.getAllAnchors=function(){return e.anchorShapes.filter((function(e){return!0===e.get("isAnchor")}))},e.getAnchor=function(t){return e.anchorShapes.filter((function(e){return"node-anchor"===e.get("className")&&e.get("index")===t}))},e.getAllAnchorBg=function(){return e.anchorShapes.filter((function(e){return"node-anchor-bg"===e.get("className")}))}},addLabel:function(e){var t=this.attrs,n=t.label,a=t.labelCfg;n&&e.addShape("text",{attrs:_({x:0,y:0,width:100,height:100,text:n},a),className:"node-text",draggable:!0})},draw:function(e,t){this.attrs=this.getShapeStyle(e);var n=t.addShape(this.shapeType,{className:"".concat(this.shapeType,"-shape"),attrs:this.attrs,draggable:!0});return this.addLabel(t),this.drawIcon(t),this.initAnchor(t),n},runAnimate:function(e){this.attrs.runAnimate},afterDraw:function(e,t){t.getItem=function(e){return t.get("children").find((function(t){return t.get("className")===e}))},this.runAnimate(t)},update:function(e,t){var n=t.get("model"),a=t.get("keyShape").attrs,o=t.get("group").getItem("node-text"),i=t.get("group").get("children")[0];setTimeout((function(){o&&o.attr({text:n.label,labelCfg:a.labelCfg}),i.attr(_({},a,{},n.style))}))},afterUpdate:function(e,t){var n=t.get("group").icon;n&&(this.attrs.hideIcon&&n.get("visible")?n.hide():this.attrs.hideIcon||n.get("visible")||n.show())},setState:function(e,t,n){var a=n.getContainer();["anchorShow","anchorActived","nodeState","nodeState:default","nodeState:selected","nodeState:hover","nodeOnDragStart","nodeOnDrag","nodeOnDragEnd"].includes(e)&&O[e].call(this,t,a)},getAnchorPoints:function(){return this.attrs.anchorPoints||[[.5,0],[1,.5],[.5,1],[0,.5]]}},"single-node")};function P(e,t,n){var a=n.getContainer();["edgeState","edgeState:default","edgeState:selected","edgeState:hover"].includes(e)&&O[e].call(this,t,a)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=p,N=f,F=y,B=u;function L(e,t){return M({},N,{},e,{anchorPointStyles:F},this.options,{},t.style,{label:t.label,labelCfg:M({},B,{},this.options.labelCfg,{},t.labelCfg),iconStyles:M({},I,{},this.options.iconStyles,{},t.iconStyles)},t.nodeStateStyles)}var V=function(e){j(e),function(e){e.registerNode("rect-node",{shapeType:"rect",attrs:{},getShapeStyle:function(e){var t=e.style.width||80,n=e.style.height||40;return L.call(this,{width:t,height:n,radius:5,x:-t/2,y:-n/2},e)}},"base-node"),e.registerNode("circle-node",{shapeType:"circle",attrs:{},getShapeStyle:function(e){var t=e.style.r||30;return L.call(this,{r:t,x:0,y:0},e)}},"base-node"),e.registerNode("ellipse-node",{shapeType:"ellipse",attrs:{iconStyles:I},getShapeStyle:function(e){return L.call(this,{rx:50,ry:30,x:0,y:0},e)}},"base-node"),e.registerNode("diamond-node",{shapeType:"path",getShapeStyle:function(e){var t=this.getPath(e);return L.call(this,{path:t,x:0,y:0},e)},getPath:function(e){var t=e.style.size||[100,100],n=t[0],a=t[1];return[["M",0,-a/2],["L",n/2,0],["L",0,a/2],["L",-n/2,0],["Z"]]}},"base-node")}(e),function(e){e.registerEdge("line-edge",{setState:P},"line"),e.registerEdge("polyline-edge",{setState:P},"polyline"),e.registerEdge("quadratic-edge",{setState:P},"quadratic"),e.registerEdge("cubic-edge",{setState:P},"cubic"),e.registerEdge("arc-edge",{setState:P},"arc")}(e)},T=function(e){g(e),V(e)},z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),t.beforeInit&&t.beforeInit(t,r.a),T(r.a),t.registerFactory&&t.registerFactory(r.a,t),this.init(t)}return Object(i.a)(e,[{key:"init",value:function(e){var t=Object.assign({container:"canvasPanel",width:window.innerWidth-100,height:window.innerHeight-40,fitViewPadding:20,animate:!0,layout:{type:"dagre",nodesep:30,ranksep:30},modes:{default:["drag-canvas","canvas-event","delete-item","select-node","hover-node","drag-node","active-edge"]},defaultNode:{type:"rect-node",style:{radius:10}},defaultEdge:{type:"polyline-edge",style:{radius:6,offset:15,stroke:"#aab7c3",lineAppendWidth:10,endArrow:{path:"M 0,0 L 8,4 L 7,0 L 8,-4 Z",fill:"#aab7c3"}}},nodeStateStyles:{"nodeState:default":{fill:"#E7F7FE",stroke:"#1890FF"},"nodeState:hover":{fill:"#d5f1fd"},"nodeState:selected":{fill:"#caebf9",stroke:"#1890FF"}},edgeStateStyles:{"edgeState:default":{stroke:"#aab7c3"},"edgeState:selected":{stroke:"#1890FF"},"edgeState:hover":{stroke:"#1890FF"}}},e);e.plugins&&e.plugins.length&&(t.plugins=e.plugins),this.instance=new r.a.Graph(t);var n=this.instance.cfg.canvas.cfg.el;n.id="".concat(t.container,"-canvas"),n.setAttribute("dx",0),n.setAttribute("dy",0),document.addEventListener("click",(function(e){n.setAttribute("isFocused",e.target.id===n.id)}))}},{key:"destroy",value:function(){this.instance.destroy(),this.instance=null}}]),e}(),W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"itemPanel",class:{hidden:e.itemVisible},attrs:{id:"itemPanel"}},[n("i",{staticClass:"iconfont icon-h-drag"}),e._v(" "),n("div",{staticClass:"icon-tool"},[n("i",{staticClass:"iconfont icon-circle",attrs:{draggable:"true","data-type":"node","data-shape":"circle-node"}}),e._v(" "),n("i",{staticClass:"iconfont icon-rect",attrs:{draggable:"true","data-type":"node","data-shape":"rect-node"}}),e._v(" "),n("i",{staticClass:"iconfont icon-ellipse",attrs:{draggable:"true","data-type":"node","data-shape":"ellipse-node"}}),e._v(" "),n("i",{staticClass:"iconfont icon-diamond",attrs:{draggable:"true","data-type":"node","data-shape":"diamond-node"}}),e._v(" "),n("i",{staticClass:"iconfont icon-model-rect",attrs:{draggable:"true","data-type":"node","data-shape":"modelRect"}}),e._v(" "),n("i",{staticClass:"split"}),e._v(" "),n("i",{staticClass:"gb-toggle-btn",attrs:{draggable:"true"},on:{click:function(t){e.itemVisible=!e.itemVisible}}})])])};W._withStripped=!0;var Y={name:"ItemPanel",props:{graph:{type:Object,default:function(){}}},data:function(){return{itemVisible:!1}},mounted:function(){var e=this;Object(C.a)(this.$refs.itemPanel.querySelector(".icon-tool").querySelectorAll(".iconfont")).forEach((function(t){t.addEventListener("click",(function(t){e.$emit("canvas-add-".concat(t.target.dataset.type),t)})),t.addEventListener("dragend",(function(t){e.$emit("canvas-add-".concat(t.target.dataset.type),t)}))})),document.addEventListener("drop",(function(e){e.preventDefault()}),!1)},methods:{addEdge:function(e){}}},X=n("KHd+"),q=Object(X.a)(Y,W,[],!1,null,null,null);q.options.__file="src/pages/graph/ItemPanel.vue";var K=q.exports,G={nodes:[{id:"1",data:{date:"2020-04-20"},type:"rect-node",style:{fill:"#39495b",lineDash:[1,2],shadowOffsetX:0,shadowOffsetY:2,shadowColor:"#666",shadowBlur:10,width:160,height:70},label:"new Vue()",labelCfg:{fill:"#fff",textAlign:"center",textBaseline:"middle",fontWeight:"bold",fontSize:24},nodeStateStyles:{"nodeState:default":{fill:"#39495b"},"nodeState:hover":{fill:"#ffbd17"},"nodeState:selected":{fill:"#f1ac00"}}},{id:"2",type:"rect-node",style:{width:200,height:60,fill:"#65b586",lineWidth:0},label:"初始化\n事件和生命周期",labelCfg:{fontSize:18,fill:"#fff"}},{id:"3",type:"rect-node",style:{fill:"#fff",stroke:"#c96164",lineWidth:3,width:180,height:60},label:"beforeCreate",labelCfg:{fill:"#c96164",width:200,height:60,fontSize:20,fontWeight:"700"},anchorPoints:[[0,0],[.5,0],[0,1],[.5,1],[1,0],[1,1]]},{id:"4",label:"初始化\n注入 & 校验",style:{width:200,height:60,fill:"#65b586",lineWidth:0},labelCfg:{fontSize:18,fill:"#fff"}},{id:"5",label:"created",type:"diamond-node",style:{size:[160,100],fill:"#f1b953",stroke:"#f1b953"},labelCfg:{fill:"#fff",fontSize:20}},{id:"6",label:'是否指定 "el" 选项?',style:{size:[130,100]},type:"diamond-node"},{id:"7",label:"当调用 vm.$mount(el) 函数时",style:{size:[130,100]},type:"ellipse-node"},{id:"8",label:'是否指定 "template" 选项'},{id:"9",label:"将 template 编译\n到 render 函数中"},{id:"10",label:"将 el 外部的 HTML\n作为 template 编译"},{id:"11",label:"beforeMount"},{id:"12",label:'创建 VM.$el\n并用其替换 "el"'}],edges:[{source:"1",target:"2",sourceAnchor:2,data:{type:"A",amount:"100,000 元",date:"2019-08-03"},label:"新建 Vue 实例",shape:"cubic-edge",style:{stroke:"red",lineDash:[5,2],lineWidth:2,lineAppendWidth:10},labelCfg:{position:"center",autoRotate:!0,style:{stroke:"white",fill:"#722ed1",lineWidth:5}}},{source:"2",target:"3",data:{type:"B",amount:"100,000 元",date:"2019-08-03"},label:"终止",edgeStateStyles:{"edgeState:default":{strokeOpacity:1},"edgeState:hover":{strokeOpacity:.6},"edgeState:selected":{strokeOpacity:1}}},{source:"2",target:"4",data:{type:"C",amount:"100,000 元",date:"2019-08-03"},label:"循环",edgeStateStyles:{"edgeState:default":{strokeOpacity:1},"edgeState:hover":{strokeOpacity:.6,stroke:"#ccc"},"edgeState:selected":{strokeOpacity:1,stroke:"#ccc"}}},{source:"4",target:"5",data:{type:"C",amount:"100,000 元",date:"2019-08-03"},label:"否"},{source:"4",target:"6",data:{type:"B",amount:"100,000 元",date:"2019-08-03"},label:"小于"},{source:"6",target:"7",data:{type:"C",amount:"100,000 元",date:"2019-08-03"}},{source:"6",target:"8",data:{type:"C",amount:"100,000 元",date:"2019-08-03"}},{source:"8",target:"9",data:{type:"C",amount:"100,000 元",date:"2019-08-03"}},{source:"8",target:"10",data:{type:"C",amount:"100,000 元",date:"2019-08-03"}},{source:"9",target:"12",data:{type:"C",amount:"100,000 元",date:"2019-08-03"}},{source:"8",target:"11",data:{type:"C",amount:"100,000 元",date:"2019-08-03"}}]},$={components:{ItemPanel:K},data:function(){return{graph:{},highLight:{undo:!1,redo:!1},lineStyle:{type:"line",width:1},headVisible:!1,configVisible:!1,config:"",tooltip:"",top:0,left:0}},mounted:function(){var e=this;this.$nextTick((function(){e.createGraphic(),e.initGraphEvent()}))},beforeDestroy:function(){this.graph.destroy()},methods:{createGraphic:function(){var e=new z({layout:{type:"dagre",nodesep:80,ranksep:40},defaultNode:{type:"rect-node",style:{radius:10},labelCfg:{fontSize:20}},nodeStateStyles:{"nodeState:default":{opacity:1},"nodeState:hover":{opacity:.8},"nodeState:selected":{opacity:.9}},registerFactory:function(e,t){var n=new e.Minimap({size:[200,100]});t.plugins=[n]}});this.graph=e.instance,this.graph.read(G),this.graph.paint()},copyNode:function(){},paste:function(){},addNode:function(e){var t={text:"node",type:e.target.dataset.shape,x:e.clientX-80,y:e.clientY-40};this.graph.addItem("node",t)},initGraphEvent:function(){var e=this;this.graph.on("on-node-mouseenter",(function(e){e&&e.item})),this.graph.on("after-node-selected",(function(t){if(e.configVisible=!!t,t&&t.item){var n=t.item.get("model");e.config=n}})),this.graph.on("after-edge-selected",(function(t){e.configVisible=!!t,t&&t.item&&(e.config=t.item.get("model").id,e.graph.updateItem(t.item,{style:{radius:10,lineWidth:2}}))})),this.graph.on("on-edge-mousemove",(function(t){t&&t.item&&(e.tooltip=t.item.get("model").label,e.left=t.clientX+40,e.top=t.clientY-20)})),this.graph.on("on-node-mousemove",(function(t){t&&t.item&&(e.tooltip=t.item.get("model").id,e.left=t.clientX+40,e.top=t.clientY-20)})),this.graph.on("on-node-mouseleave",(function(t){t&&t.item&&(e.tooltip="")})),this.graph.on("on-edge-mouseleave",(function(t){t&&t.item&&(e.tooltip="")})),this.graph.on("before-node-removed",(function(e){e.target;var t=e.callback;setTimeout((function(){t(!0)}),100)})),this.graph.on("after-node-dblclick",(function(e){e&&e.item})),this.graph.on("before-edge-add",(function(t){var n=t.source,a=t.target,o=t.sourceAnchor,i=t.targetAnchor;setTimeout((function(){e.graph.addItem("edge",{source:n.get("id"),target:a.get("id"),sourceAnchor:o,targetAnchor:i,label:"edge label"})}),100)}))}}},H=(n("eGKd"),Object(X.a)($,a,[],!1,null,null,null));H.options.__file="src/pages/graph/graph.vue";t.default=H.exports},eGKd:function(e,t,n){"use strict";var a=n("/qA8");n.n(a).a}}]);